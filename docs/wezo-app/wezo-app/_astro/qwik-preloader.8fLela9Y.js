const c=document,p="modulepreload",y="preload",_=c.createElement("link").relList.supports(p)?p:y,$=/\.[mc]?js$/,k=0,m=2,q=3,v=4,h=new Map;let d=0;const r=[],g=()=>{if(r.length)for(;r.length;){const t=r[0];if(1-t.u>=.99||d<2)r.shift(),x(t);else break}},x=t=>{if(t.i>=m)return;d++;const e=Date.now();t.p=e-t.m,t.i=m;const n=c.createElement("link");n.href=new URL(`${A}${t.B}`,c.baseURI).toString(),n.rel=_,n.as="script",n.onload=n.onerror=()=>{d--;const o=Date.now();t.$=o-e,t.i=v,n.remove(),g()},c.head.appendChild(n)},B=(t,e,n)=>{if(n?.has(t))return;const o=t.u;if(t.u=e,!(o-t.u<.01)&&t.h){n||(n=new Set),n.add(t);const s=1-t.u;for(const l of t.h){const a=b(l.B);if(a.u===0)continue;let i;if(l.S>.5&&(s===1||s>=.99&&u<100))u++,i=Math.min(.01,1-l.S);else{const w=1-l.S*s,I=l.q,f=w/I;i=Math.max(.02,a.u*f),l.q=f}B(a,i,n)}}},S=(t,e)=>{const n=b(t);n&&n.u>e&&B(n,e)};let u;const L=(t,e)=>{if(!t?.length)return;u=0;let n=e?1-e:.4;if(Array.isArray(t))for(let o=t.length-1;o>=0;o--){const s=t[o];typeof s=="number"?n=1-s/10:S(s,n)}else S(t,n);g()};document.addEventListener("qsymbol",t=>{const{symbol:e,href:n}=t.detail;if(n){const o=e.slice(e.lastIndexOf("_")+1);L(o,1)}});let A;const C=(t,e)=>({B:t,i:$.test(t)?k:q,h:e,u:1,m:Date.now(),p:0,$:0}),b=t=>{let e=h.get(t);return e||(e=C(t,void 0),h.set(t,e)),e};export{L as p};
